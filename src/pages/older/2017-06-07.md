---
date: 2017-06-07 12:00:22
status: public
title: NPM相关
---

在初始化Vue项目的时候，经常会遇到npm报错，以下是我根据个人项目经验整理出的需要注意的点。

###Yarn
为了锁定项目协作者的node_modules版本，推荐使用yarn来锁定安装统一版本的npm包。
```bash
// mac系统下
brew update
brew install yarn
```

### 如果遇到node-sass的报错
类似: `Error: ENOENT: no such file or directory, scandir 'node_modules/node-sass/vendor'`
这种报错通常是因为npm在安装node-sass的时候没有科学上网导致的。要么删除掉node_modules在科学上网后重新安装一遍，要么就执行下面的命令编译node-sass（但是此方法有一定可能会使得开发者之间编译出的版本不一致）。
`npm rebuild node-sass`

### 不翻墙，如何使node-sass不报错
我们都知道有npm可以使用淘宝源来加速包的安装，但是不经过设置node-sass的下载并不会走淘宝源，其实就需要在命令行运行：
`yarn config set sass-binary-site http://npm.taobao.org/mirrors/node-sass`

### 不翻墙，如何使phantomjs-prebuilt下载不报错
除了node-sass安装phantomjs的过程也是被墙的，应该是走了Amazon美国CDN的原因，我注意到有一种方式可以通过淘宝源在全局安装phantomjs，这样安装独立项目的时候就不需要再下载了 (注意全局安装的版本要跟项目的phantomjs版本一致)
`npm install phantomjs@2.1.1 -g`

### 时间戳处理
时间戳总是处理起来很麻烦，我个人比较推荐使用moment插件来加速开发体验。
```js
moment(time).format('YYYY-MM-DD hh:mm:ss')
const moment = require('moment');
moment(time) {
	return moment(time);
},
```