---
date: 2017-10-23 11:50:00
status: public
title: Vue2.5发布
---

加入了我个人认为最重要的功能——不确定环境的服务端渲染，以下为介绍。

> ## Environment Agnostic SSR
> 
> The default build of `vue-server-renderer` assumes a Node.js environment, which makes it unusable in alternative JavaScript environments such as php-v8js or Nashorn. In 2.5 we have shipped a build that is largely environment-agnostic, which makes it usable in the environments mentioned above.
> 
> For both environments, it is necessary to first prepare the environment by mocking the `global` and `process` objects, with `process.env.VUE_ENV` set to `"server"`, and `process.env.NODE_ENV` set to `"development"` or `"production"`.
> 
> In Nashorn, it may also be necessary to provide a polyfill for `Promise` or `setTimeout` using Java's native timers.
> 
> Example usage in php-v8js:

```

<?php
  $vue_source = file_get_contents('/path/to/vue.js');
  $renderer_source = file_get_contents('/path/to/vue-server-renderer/basic.js');
  $app_source = file_get_contents('/path/to/app.js');

  $v8 = new V8Js();

  $v8->executeString('var process = { env: { VUE_ENV: "server", NODE_ENV: "production" }}; this.global = { process: process };');
  $v8->executeString($vue_source);
  $v8->executeString($renderer_source);
  $v8->executeString($app_source);
?>

```


``` js
// app.js
var vm = new Vue({
  template: `<div>{{ msg }}</div>`,
  data: {
    msg: 'hello'
  }
})

// exposed by vue-server-renderer/basic.js
renderVueComponentToString(vm, (err, res) => {
  print(res)
})

```
## 还有TypeScript 支持
[TypeScript Changes](https://medium.com/the-vue-point/upcoming-typescript-changes-in-vue-2-5-e9bd7e2ecf08)

