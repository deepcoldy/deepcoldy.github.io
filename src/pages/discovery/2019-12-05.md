---
date: 2019-10-22
status: public
title: MacOS输入法卡顿
---

公司电脑在长时间使用后，无论是使用搜狗输入法还是苹果自带拼音输入法，打字时都会出现明显的延迟。

表象就是快速输入字母，文字候选框要等大概几秒钟才会出现。

系统版本Catalina 10.15

遂打开「活动监视器」查看CPU和内存占用情况。

发现在打字时，有个`Report Crash`疯狂占用CPU。

通过系统日志`tail -F /var/log/system.log`可以看到：

```
Dec  5 11:57:46 PM80253170 com.apple.xpc.launchd[1] (com.apple.appstoreagent[18329]): Service exited with abnormal code: 1
Dec  5 11:57:46 PM80253170 com.apple.xpc.launchd[1] (com.apple.appstoreagent): Service only ran for 5 seconds. Pushing respawn out by 5 seconds.
```

通过此日志得出结论跟苹果账户有关。

### 解决方案：

系统设置-Apple ID-概览-退出Apple ID-重启电脑

[原贴链接](https://discussions.apple.com/thread/250768095)

重启后系统日志中确实没有该报错了，`Report Crash`的CPU占用降低了一半以上。

继续查看系统日志，发现出现了另一个报错：

```
Dec  5 12:06:21 PM80253170 com.apple.xpc.launchd[1] (com.teclink.agentuser.peruser): Service only ran for 1 seconds. Pushing respawn out by 9 seconds.
Dec  5 12:06:31 PM80253170 com.apple.xpc.launchd[1] (com.teclink.agentuser.peruser[2691]): Service exited due to SIGSEGV | sent by exc handler[2691]
```

由于该报错没有找到解决方案。

遂尝试关闭`Report Crash`。

### 关闭Report Crash

```
launchctl unload -w /System/Library/LaunchAgents/com.apple.ReportCrash.plist
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.ReportCrash.Root.plist
```

关闭后系统重新流畅了起来。虽然治标不治本，使用上没有影响就好。

### 打开Report Crash

```
launchctl load -w /System/Library/LaunchAgents/com.apple.ReportCrash.plist
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.ReportCrash.Root.plist
```