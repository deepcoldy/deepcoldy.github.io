---
date: 2019-01-29
status: public
title: 解决LEDE中Anyconnect插件无法正常运行
---

一直以来，我都是通过Anyconnect来远程访问家里的群晖等网络设备。

使用用户名+密码的方式每次登陆都很麻烦。

所以想使用证书的方式来登陆Anyconnect。

在不久之前的某天，我在LEDE里面开始了我的想法。

一开始是很不顺利的，插件重启后就报错了。

错误报告为：安装支持环境-1失败,你的网络可能有问题,请重试!

我找了很多人都说更换源可能会好，我按照他们的提示更换为了openwrt.proxy.ustclug.org和另外一个国内的源都没有解决。

此时我又看到Telegram里面有人说更新一下会好。

于是我把LEDE版本更新到了2.26

![](https://ws2.sinaimg.cn/large/006tNc79ly1fznkv1kq7zj30vp0u0476.jpg)

然而除了系统里面的DDNS功能被删除了之外，并没有什么改变。

此时我又接到了酷软中心的0.3.7更新和Anyconnect Server的0.9更新。

其中Anyconnect Server的更新说到优化了提示文案，确实他把错误文案更改为了:请检查到downloads.openwrt.org的连通,或者更换源地址重试。

即使我的源不是downloads.openwrt.org他也会提示这个连通有问题，明显就是没提示核心问题嘛。

接下来我又试了以下几种方式：

* 把源的这几个地址都添加到了ss里面，让源走代理（未成功）
* 更改LEDE的DNS为114.114.114.114（未成功）
* 进入Shell更改resolv.conf（越来越接近了）

```shell
echo "nameserver 114.114.114.114">/tmp/resolv.conf
rm -f /var/lock/opkg.lock
opkg update
```
* 重新安装了ocserv（成功解决）
```
opkg update && opkg install --force-overwrite ocserv
```

成功后插件状态截图：

![](https://ws1.sinaimg.cn/large/006tNc79ly1fznl3nvy7uj30pm0mqgot.jpg)

记得下载证书后在你的设备端认证证书


享受吧

![](https://ws4.sinaimg.cn/large/006tNc79ly1fznlb6t7qgj30n01dsaeo.jpg)

[参考Github链接](https://github.com/koolshare/ledesoft/issues/234)