---
date: 2019-10-21
status: public
title: CentOS安装mysql
---

## CentOS安装mysql

常遇到如下报错：
`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)`


### 安装与启动


MariaDB与Mysql是不同的，根据自己选择安装，别搞混了。

注意，CentOS`yum install mysql`默认安装的是MariaDB。

所以我这边直接安装mariadb。

#### 安装MariaDB

```shell
yum install mariadb mariadb-server
systemctl start mariadb
```

如果不安装`mariadb-server`，会报错：`Failed to start mariadb.service: Unit not found.`

#### 登陆

将root用户密码修改为root：

```
mysql
use mysql;
MariaDB [(none)]> update user set password=password("root")where user='root';
```

建立一个可远程登陆的用户（用户名user，密码password）：

```
grant all privileges on *.* to user@% identified by 'password';
```

#### 安装Mysql

直接在物理机上从官方源下载可能会比较慢。最好是翻墙后把安装包从oracle官网下载好传到物理机上。

我这边安装centos的5.7，[官网下载地址](https://dev.mysql.com/downloads/mysql/5.7.html#downloads)

选择SUSE Linux Enterprise Server - mysql-5.7.28-1.sles12.x86_64.rpm-bundle.tar

下载完scp或者rsync到服务器上，tar解压缩

```
rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm
rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm
rpm -ivh mysql-community-devel-5.7.28-1.el7.x86_64.rpm
```

我的机器由于找不到`libmysqlclient.so.18`，所以需要`rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm`


安装完毕，启动mysql

```shell
# 查看mysql是否启动
service mysqld status

# 启动mysql
service mysqld start

# 停止mysql
service mysqld stop

# 重启mysql
service mysqld restart
```
